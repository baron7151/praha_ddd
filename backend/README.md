## 仕様

このサービスでは、プログラミング学習サイトを模擬しており、下記の概念が存在しています。

- ユーザ（プログラミング学習を行なっている一般ユーザです。）
- ペア（2-3 人のユーザが 1 つのペアに所属しています。）
- チーム（複数のペアが 1 つのチームに所属しています。）
- 課題（ユーザは課題に同じペアに所属しているメンバーと課題に取り組みます。）

また、本サービスでは以下のような機能を備えています。

- ユーザの情報を参照・作成・更新が可能
- ペアの情報の参照・更新が可能
- チームの情報の参照・更新が可能
- 課題状況の更新及び、特定条件で検索を行い情報取得可能

本サービスのオブジェクト図及びユースケース図は doc フォルダ配下に配置しているため、こちらを参照してください。

## 技術

- 言語：typescript
- フレームワーク：nestJs
- テストツール：jest
- ORM：prisma
- アーキテクチャ：DDD
  - 詳細は doc フォルダ配下の「機能関連図.png」を参照してください。

## フォルダ構成

backend/src
サービスメインのソースコード配置。配下に下記のフォルダを配置し、それぞれ以下の役割を持つ。

- controller
  - API のリクエスト・レスポンスを定義しているクラスを配置している。エンドポイントに関連する app のユースケースクラスを呼び出す。
- infra
  - 外部 API や DB にアクセスする機能を持つクラスを配置している。
- app
  - 本サービスにおけるユースケースを実現するためのクラスを配置している。
- domain
  - 本サービスにおけるビジネスロジックを定義しているクラスを配置している。

backend/prisma
本サービスおける DB のスキーマを定義している。

backend/testUtil
単体・結合・API テストで利用するクラスを配置している。

doc
本サービスの各種ドキュメントを配置している。

## 動作確認

1. docker を利用して、postgresql を起動する。

```bash
cd ./docker
docker-compose up -d --build
```

2. テストサーバー起動 (localhost:3001 で起動)

```bash
yarn dev:test
```

3. localhost:3001/openapi にアクセスして、本サービスの API 仕様を確認する。

- 初期データを投入するには、GET /debug?operation=init でリクエスト実施
- GET /user で登録されているユーザ全件確認できる

## テスト

### 単体テスト

1. `yarn test`

### 結合テスト

1. `yarn test:integration`

### API・ユースケーステスト

1. `yarn test:api`
